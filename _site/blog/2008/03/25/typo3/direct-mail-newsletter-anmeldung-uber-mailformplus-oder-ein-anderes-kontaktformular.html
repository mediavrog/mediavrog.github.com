

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Direct Mail Newsletter Anmeldung über Mailformplus oder ein anderes Kontaktformular - mediavrog</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="mediavrog">
<meta property="og:title" content="Direct Mail Newsletter Anmeldung über Mailformplus oder ein anderes Kontaktformular">


  <link rel="canonical" href="https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular">
  <meta property="og:url" content="https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular">



  <meta property="og:description" content="  Die Anmeldung zum Erhalt eines Newsletters per DirectMail läuft bekannterweise über die Extension [Direct Mail Subscription][1].">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2008-03-25T12:03:00+09:00">
  
    <link rel="next" href="https://mediavrog.net/blog/2008/04/01/wordpress/wordpress-25-tinymce-306-template-plugin-zum-laufen-bekommen" title="Wordpress 2.5 &gt; tinyMCE 3.0.6 &gt; Template Plugin zum Laufen bekommen">
  
  
    <link rel="prev" href="https://mediavrog.net/blog/2008/02/25/weitere-themen/server/mysql-lastet-vserver-aus" title="mysql lastet vServer aus">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Maik Buchmeyer",
      "url" : "https://mediavrog.net",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://mediavrog.net/feed.xml" type="application/atom+xml" rel="alternate" title="mediavrog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://mediavrog.net/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!--<link rel="pingback" href="https://webmention.io/www.mediavrog.net/xmlrpc" />-->
<link rel="webmention" href="https://webmention.io/www.mediavrog.net/webmention" />

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://mediavrog.net/">mediavrog</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mediavrog.net/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mediavrog.net/blog/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mediavrog.net/projects/">Projects</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  
    <div class="kudos" data-amount="0" data-url="https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular"></div>
  

  <div class="author__avatar">
    
    	<img src="https://mediavrog.net/images/bio-photo.jpg" class="author__avatar" alt="Maik Buchmeyer">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Maik Buchmeyer</h3>
    <p class="author__bio">Full stack & mobile engineer. CTO at AIR at en-japan</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Tokyo</li>
      
      
      
      
      
        <li><a href="https://twitter.com/@mediavrog" rel="me"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/mediavrog" rel="me"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Direct Mail Newsletter Anmeldung über Mailformplus oder ein anderes Kontaktformular">
    <meta itemprop="description" content="  Die Anmeldung zum Erhalt eines Newsletters per DirectMail läuft bekannterweise über die Extension [Direct Mail Subscription][1].">
    <meta itemprop="datePublished" content="March 25, 2008">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Direct Mail Newsletter Anmeldung über Mailformplus oder ein anderes Kontaktformular
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  2 minute read
	
</p>
          
          
            <div class="thumb">
              <img src="https://mediavrog.net/images/typo33.jpg" alt="Direct Mail Newsletter Anmeldung über Mailformplus oder ein anderes Kontaktformular thumb image" />
            </div>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <blockquote>
  <p>Die Anmeldung zum Erhalt eines Newsletters per DirectMail läuft bekannterweise über die Extension <a href="http://typo3.org/extensions/repository/view/direct_mail_subscription/1.1.0/" title="Seite der Extension auf Typo3.org besuchen (öffnet neues Fenster)">Direct Mail Subscription</a>.</p>
</blockquote>

<p>Doch leider fehlt es ihr an Flexibilität, da die Funktionalität des Anmeldens (inkl. Versand einer Bestätigungsmail)
 nicht in einer Methode gekapselt ist, sondern über Typoscript realisiert wird (userFunc). Somit ist es
  nicht ohne Weiteres möglich, eine Newsletteranmeldung per Checkbox in einem beliebigen (Kontakt-)Formular zu
   integrieren. Im Folgenden wird eine Lösung gezeigt, welche die beschriebene Funktionalität ermöglicht.</p>

<p>Das TS-Setup findet sich in der ext_typoscript_setup.txt von <a href="http://typo3.org/extensions/repository/view/direct_mail_subscription/1.1.0/" title="Seite der Extension auf Typo3.org besuchen (öffnet neues Fenster)">Direct Mail Subscription</a> (ein Auszug):</p>

<pre><code class="language-typoscript">plugin.feadmin.dmailsubscription &amp;gt;
plugin.feadmin.dmailsubscription = USER_INT
plugin.feadmin.dmailsubscription {
   userFunc = user_feAdmin-&amp;gt;init
   includeLibs = media/scripts/fe_adminLib.inc
   templateFile = {$plugin.feadmin.dmailsubscription.file.templateFile}
[...]
</code></pre>

<p>Nach dem Einschreiben über das Frontendplugin von <a href="http://typo3.org/extensions/repository/view/direct_mail_subscription/1.1.0/" title="Seite der Extension auf Typo3.org besuchen (öffnet neues Fenster)">Direct Mail Subscription</a> werden die Daten an die init-Methode
 der Klasse user_feAdminübergeben, welche sich um das Speichern der Daten in der richtigen Tabelle und den Versand 
 einer Bestätigungsmail (Double Opt-In) kümmert.</p>

<p>Um diese Funktionalität in der eigenen Extension oder einer userFunktion (z.B. bei <a href="http://typo3.org/documentation/document-library/extension-manuals/th_mailformplus/4.0.5/view/1/5/#id3823153" title="Dokumentation der saveUserFunc auf Typo3.org in neuem Fenster öffnen">Mailformplus die saveUserFunc</a>)
 nutzen zu können muss man wie im TS die richtigen Bibliotheken einbinden und noch ein paar Parameter setzen.
  Es folgt eine Schritt für Schritt-Anleitung. Es wird vorausgesetzt, dass bereits eine PHP-Datei exisitiert, 
  welche nach dem Abschicken des Mailformulars ausgeführt wird (ähnlich der <a href="http://typo3.org/documentation/document-library/extension-manuals/th_mailformplus/4.0.5/view/1/5/#id3823153">saveUserFunc von Mailformplus</a> )
   und die Extension <a href="http://typo3.org/extensions/repository/view/direct_mail_subscription/1.1.0/">Direct Mail Subscription</a> passend konfiguriert ist.</p>

<h2 id="die-bentigten-klassen-und-bibliotheken-einbinden">die benötigten Klassen und Bibliotheken einbinden</h2>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>// fe_admin Bibliothek; speichert Daten in DB und verschickt die Bestätigungsmail
require_once("typo3/sysext/cms/tslib/media/scripts/fe_adminLib.inc");

// Extension Direct Mail Subscription; enthält Konfiguration; wird eventuell nicht gebraucht(?)
require_once(t3lib_extMgm::extPath('direct_mail_subscription').'pi/class.dmailsubscribe.php');
</code></pre>
</div>

<h2 id="die-konfiguration-von-direct-mail-subscription-holen">Die Konfiguration von Direct Mail Subscription holen</h2>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$conf = $GLOBALS['TSFE']-&gt;tmpl-&gt;setup['plugin.']['feadmin.']['dmailsubscription.'];
</code></pre>
</div>

<p>In dieser Konfiguration ist unter Anderem der Pfad zum Template der Anmeldung kodiert, welche von feAdmin benötigt wird.
 Falls das Template nicht gefunden wird, so kann man den Pfad auch korrigieren 
 <code class="highlighter-rouge">$conf['templateFile'] = "../../../".$conf['templateFile'];</code></p>

<h2 id="die-richtigen-post-variablen-nutzen">Die richtigen Post-Variablen nutzen</h2>

<p>Die init Methode der fe_admin wird sich <code class="highlighter-rouge">$\_POST[&amp;#8218;FE&amp;#8216;]</code> Daten holen, um mit diesen zu arbeiten. 
Dabei ist in zweiter Ebene des Arrays die Tabelle codiert, in der die Daten gespeichert werden. Der Schlüssel dritter 
Ebene repräsentiert nunmehr das DB Feld. Folgende Post-Variablen sollten beim Abschicken des Formulars mitgeschickt 
werden, ansonsten können sie auch in PHP mit eigenen Werten belegt werden.</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>// Name des Newsletterempfängers
$_POST['FE']['tt_address']['name'];

// Emailadresse
$_POST['FE']['tt_address']['email'];

// Sollen HTML Mails empfangen werden?
$_POST['FE']['tt_address']['module_sys_dmail_html'];
</code></pre>
</div>

<h2 id="objekt-von-userfeadmin-erzeugen-und-konfiguration-bergeben">Objekt von user_feAdmin erzeugen und Konfiguration übergeben</h2>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$ua = new user_feAdmin();
$ua-&gt;cObj = t3lib_div::makeInstance('tslib_cObj');
$ua-&gt;init($content,$conf);
</code></pre>
</div>

<p>Die Variable $content kann laut <a href="http://doc-typo3.ameos.com/4.1.0/classuser__feAdmin.html" title="Class Reference von feAdmin  öffnen">Class Reference von feAdmin</a> weggelassen werden (leerer String).</p>

<p>Mit dem Ausführen der init-Methode werden alle nötigen Prozesse angestoßen, welche zur Newsletteranmeldung benötigt werden.</p>

<h3 id="beispiel">Beispiel</h3>

<p>Hier nochmal ein <a href="/uploads/example_newslettersub.txt" title="Beispiel">Codeblock mit allen benötigten Schritten</a></p>

<h3 id="kommentare">Kommentare?</h3>

<p><strong>Falls jemand eine einfachere Implementation kennt oder sonstige Hinweise zu meinem Vorschlag hat, 
der poste doch bitte einen Kommentar :)</strong></p>

<h3 id="hinweise">Hinweise</h3>

<p><em>Noch zwei letzte Hinweise, falls keine Bestätigungsmail verschickt wird:</em></p>

<p>Es kann u.A. daran liegen, dass das Template für <a href="http://typo3.org/extensions/repository/view/direct_mail_subscription/1.1.0/">Direct Mail Subscription</a> nicht gefunden wird. 
Der Rückgabewert der init-Methode gibt meistens einen guten Aufschluss über den Status und eventuelle Fehler. 
Einfach mal in ner Variable ablegen und ausgeben (per <code class="highlighter-rouge">echo</code>, <code class="highlighter-rouge">var_dump</code> etc).</p>

<p>Per <code class="highlighter-rouge">getcwd()</code> kann man außerdem per PHP prüfen, in welchen Verzeichnis das aktuelle Script ausgeführt wird. 
Hilft beim Testen ob der Pfad zum Template File stimmt.</p>


        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://mediavrog.net/tags/#direct-mail" class="page__taxonomy-item" rel="tag">direct-mail</a><span class="sep">, </span>
    
      
      
      <a href="https://mediavrog.net/tags/#mailformplus" class="page__taxonomy-item" rel="tag">mailformplus</a><span class="sep">, </span>
    
      
      
      <a href="https://mediavrog.net/tags/#newsletter" class="page__taxonomy-item" rel="tag">newsletter</a><span class="sep">, </span>
    
      
      
      <a href="https://mediavrog.net/tags/#typo3" class="page__taxonomy-item" rel="tag">typo3</a><span class="sep">, </span>
    
      
      
      <a href="https://mediavrog.net/tags/#userfunc" class="page__taxonomy-item" rel="tag">userFunc</a>
    
    </span>
  </p>




  






  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://mediavrog.net/categories/#typo3" class="page__taxonomy-item" rel="tag">typo3</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published on </strong> <time datetime="2008-03-25T12:03:00+09:00">March 25, 2008</time></p>
        
        
          
<p class="page__fix">
  <strong><i class="fa fa-fw fa-bug" aria-hidden="true"></i> Found a mistake?</strong>
  <span>
    <a class="btn btn--inverse" href="https://github.com/mediavrog/mediavrog.github.io/edit/master/_posts/2008/2008-03-25-direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular.md" rel="nofollow">Please fix it</a>
    Thanks :)
  </span>
</p>
        
      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="https://mediavrog.net/blog/2008/02/25/weitere-themen/server/mysql-lastet-vserver-aus" class="pagination--pager" title="mysql lastet vServer aus
">Previous</a>
    
    
      <a href="https://mediavrog.net/blog/2008/04/01/wordpress/wordpress-25-tinymce-306-template-plugin-zum-laufen-bekommen" class="pagination--pager" title="Wordpress 2.5 &gt; tinyMCE 3.0.6 &gt; Template Plugin zum Laufen bekommen
">Next</a>
    
  </nav>

    </div>

    
      

<div class="page__comments">
  <h4 class="page__comments-title">Comments</h4>
  
    <section id="comments"><!-- start custom comments snippet -->



<p class="notice--success">
  <a href="https://github.com/mediavrog/mediavrog.github.io/edit/master/_posts/2008/2008-03-25-direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular.md" rel="nofollow"><strong>Leave a comment</strong></a>
  &mdash;
  Edit this page on github and issue a PR for your comment please.
  <a href="https://github.com/mediavrog/mediavrog.github.io/wiki#how-to-comment" rel="nofollow"><sup>HowTo?</sup></a>
</p>





<!--<p><small><span data-webmention-count data-url="https://mediavrog.net/blog/2008/03/25/typo3/direct-mail-newsletter-anmeldung-uber-mailformplus-oder-ein-anderes-kontaktformular">0</span> mentions</small></p>-->
<!-- end custom comments snippet --></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  
    <a href="https://mediavrog.net/career/headhunted-not/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Headhunted - Not
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  2 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">When to be careful to not just pass on your data to any recruiter.
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://mediavrog.net/javascript/bootstrap-datepicker-readonly/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Read-only for bootstrap datepicker calendar popup
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  less than 1 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Small js to simulate read only in the calendar popup.
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://mediavrog.net/blog/2013/10/12/app/kompare/kompare-widget-for-price-comparison-released">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">kompare - ein Widget zum einfachen vergleichen von Preisen released
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  less than 1 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Vor ein paar Tagen ging das kompare Widget nun endlich im [Play Store][1] live.

</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://mediavrog.net/apps/kompare-android-price-comparison-widget/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">kompare - Android widget for price comparison released
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  less than 1 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">The kompare price comparison widget was released to the Play Store just a few days ago.

</p>
    </article>
  </a>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/mediavrog"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://mediavrog.net/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Maik Buchmeyer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://mediavrog.net/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1304393-2', 'auto');
  ga('send', 'pageview');
</script>










  </body>
</html>

